{"version":3,"sources":["utils/worker.js","utils/helpers.js","utils/item.js","components/item.js","components/step.js","App.js","serviceWorker.js","index.js"],"names":["addMethods","methods","module","exports","w","Worker","name","numToNumeral","num","levelToExperience","level","Math","pow","getItemData","item","new_item","enchantments","map","enchantment","find","enchantment_data","checkEnchantmentIsCompatible","targetItem","newEnchantment","some","some_enchantment","group","group_exception","applies_to","some_item","Item","existingEnchantments","enabled","possibleEnchantments","filter","filtered_enchantment","max_level","value","label","this","props","changeEnchantmentToAdd","onDelete","onAddEnchantment","onDeleteEnchantment","onChangeLevel","onChangePenalty","Container","fluid","Row","Col","xs","Table","index","key","type","min","max","onChange","e","item_multiplier","book_multiplier","Button","variant","onClick","options","getPossibleEnchantmentOptions","placeholder","InputGroup","className","Prepend","Text","FormControl","penalty","React","PureComponent","Step","step","Badge","pill","is_curse","sacrificeItem","resultingItem","stepCost","instance","worker","App","items_to_combine","boots_sample","state","results","steps","status","nextIndex","length","to_combine_item_type","reduce","items","combineAndSetState","setState","terminate","combineItemsExecute","then","itemToAdd","new_items_to_combine","item_index","target","modifiedItem","valueAsNumber","sort","item_a","item_b","enchantmentToAdd","enchantmentName","getEnchantmentMaxLevel","filter_enchantment","find_enchantment","getAddOptions","changeItemToAdd","addItem","deleteItem","addEnchantment","deleteEnchantment","changeEchantmentToAdd","changeEnchantmentLevel","changeItemPenalty","cost","total","Component","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.0d2d662d.chunk.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"combineItemsExecute\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"35504750571d73d6a54e.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","const numToNumeral = (num) => {\n  switch (num) {\n    case 1:\n      return \"I\";\n    case 2:\n      return \"II\";\n    case 3:\n      return \"III\";\n    case 4:\n      return \"IV\";\n    case 5:\n      return \"V\";\n    default:\n      return \"Numeral Error\";\n  }\n};\n\nconst levelToExperience = (level) => {\n  if (level < 17) {\n    return Math.pow(level, 2) + 6 * level;\n  } else if (level < 31) {\n    return 2.5 * Math.pow(level, 2) - 40.5 * level + 360;\n  } else {\n    return 4.5 * Math.pow(level, 2) - 162.5 * level + 2220;\n  }\n};\n\nconst addIndexes = (arrayToIndex) => {\n  return arrayToIndex.map((item, index) => {\n    return { ...item, index: index };\n  });\n};\n\nexport { numToNumeral, levelToExperience, addIndexes };\n","import enchantments from \"../data/enchantments.json\";\nimport { levelToExperience } from \"../utils/helpers\";\n\nconst getEnchantments = (item) => {\n  return enchantments.filter((enchantment) =>\n    enchantment.applies_to.some((possible_item) => possible_item === item)\n  );\n};\n\nconst getItemData = (item) => {\n  const new_item = { ...item };\n  new_item.enchantments = new_item.enchantments.map((enchantment) => {\n    return {\n      ...enchantment,\n      ...enchantments.find(\n        (enchantment_data) => enchantment_data.name === enchantment.name\n      ),\n    };\n  });\n  return new_item;\n};\n\nconst checkEnchantmentIsCompatible = (targetItem, newEnchantment) => {\n  return (\n    // There isn't an existing enchantment in a mutal exclusion group\n    !targetItem.enchantments.some(\n      (some_enchantment) =>\n        some_enchantment.group &&\n        newEnchantment.group &&\n        some_enchantment.group === newEnchantment.group &&\n        !(\n          some_enchantment.group_exception &&\n          newEnchantment.group_exception &&\n          some_enchantment.group_exception === newEnchantment.group_exception\n        ) // Rule exception for tridents\n    ) &&\n    //Possible enchantment is applicable to the given item\n    newEnchantment.applies_to.some(\n      (some_item) => some_item === targetItem.name || targetItem.name === \"book\"\n    )\n  );\n};\n\nconst mergeEnchantments = (\n  sacrificeItem,\n  targetEnchantments,\n  sacrificeEnchantments\n) => {\n  return sacrificeEnchantments.reduce(\n    (mergeResults, sacrificeEnchantment) => {\n      const multiplier =\n        sacrificeItem.name === \"book\"\n          ? sacrificeEnchantment.book_multiplier\n          : sacrificeEnchantment.item_multiplier;\n\n      // Find if target already has enchantment\n      const matchedEnchantment = mergeResults.resultingEnchantments.find(\n        (resultingEnchantment) =>\n          resultingEnchantment.name === sacrificeEnchantment.name\n      );\n      let newLevel = sacrificeEnchantment.level;\n      // Enchantment matched. Check Level.\n      if (matchedEnchantment) {\n        // Make a copy of the matched enchantment.\n        const newMatchedEnchantment = { ...matchedEnchantment };\n        let levelDifference =\n          sacrificeEnchantment.level - newMatchedEnchantment.level;\n        // Levels are the same. Bump level.\n        if (levelDifference === 0) {\n          levelDifference += 1;\n          newLevel += 1;\n        }\n        if (levelDifference > 0) {\n          mergeResults.cost += levelDifference * multiplier;\n          newMatchedEnchantment.level = newLevel;\n          // Remove old enchantment and replace with new copy\n          mergeResults.resultingEnchantments = [\n            ...mergeResults.resultingEnchantments.filter(\n              (filtered_enchantment) =>\n                filtered_enchantment.name !== newMatchedEnchantment.name\n            ),\n            newMatchedEnchantment,\n          ];\n        }\n      } else {\n        // New enchantment. Add.\n        mergeResults.resultingEnchantments = [\n          ...mergeResults.resultingEnchantments,\n          sacrificeEnchantment,\n        ];\n        mergeResults.cost += newLevel * multiplier;\n      }\n      return mergeResults;\n    },\n    { cost: 0, resultingEnchantments: [...targetEnchantments] }\n  );\n};\n\nconst anvil = (targetItem, sacrificeItem) => {\n  const targetPenalty = targetItem.penalty || 0;\n  const sacrificePenalty = sacrificeItem.penalty || 0;\n  // Filter non-applicable enchantments\n  const filtered_enchantments = sacrificeItem.enchantments.filter(\n    (enchantment) => checkEnchantmentIsCompatible(targetItem, enchantment)\n  );\n  const mergeResults = mergeEnchantments(\n    sacrificeItem,\n    targetItem.enchantments,\n    filtered_enchantments\n  );\n  const resultingItem = {\n    ...targetItem,\n    enchantments: mergeResults.resultingEnchantments,\n  };\n  const stepCost =\n    mergeResults.cost +\n    Math.pow(2, targetPenalty) -\n    1 +\n    Math.pow(2, sacrificePenalty) -\n    1;\n  resultingItem.penalty = Math.max(targetPenalty, sacrificePenalty) + 1;\n  const results = {\n    resultingItem: resultingItem,\n    cost: stepCost,\n    steps: [\n      {\n        targetItem: targetItem,\n        sacrificeItem: sacrificeItem,\n        resultingItem: resultingItem,\n        stepCost: stepCost,\n      },\n    ],\n  };\n  return results;\n};\n\nconst combineItems = (items) => {\n  items = items.map(getItemData);\n\n  //For each item, determine what can be combined into it, use anvil, then call combineItems with what remains\n  let allResults = [];\n  items.forEach((targetItem) => {\n    const nonTargets = items.filter(\n      (sacrificeItem) => sacrificeItem !== targetItem\n    );\n    const eligibleItems = nonTargets.filter(\n      (sacrificeItem) =>\n        sacrificeItem.name === \"book\" || targetItem.name !== \"book\"\n    );\n\n    if (eligibleItems.length > 0) {\n      //For each eligible item\n      eligibleItems.forEach((sacrificeItem) => {\n        let anvilResults = anvil(targetItem, sacrificeItem);\n        const remaining_items = nonTargets.filter(\n          (item) => item !== sacrificeItem\n        );\n\n        if (remaining_items.length > 0) {\n          const remaining_items_results = combineItems([\n            anvilResults.resultingItem,\n            ...remaining_items,\n          ]);\n\n          anvilResults.resultingItem = remaining_items_results.resultingItem;\n          anvilResults.cost += remaining_items_results.cost;\n          anvilResults.steps = [\n            ...anvilResults.steps,\n            ...remaining_items_results.steps,\n          ];\n        }\n        allResults = [...allResults, anvilResults];\n      });\n    }\n  });\n\n  //Get the cheapest results\n  if (allResults.length > 0) {\n    return allResults.reduce((cheapestResults, singleResult) => {\n      return levelToExperience(singleResult.cost) <\n        levelToExperience(cheapestResults.cost)\n        ? singleResult\n        : cheapestResults;\n    }, allResults[0]);\n  } else {\n    return { targetItem: items[0], steps: [], status: \"No items to combine\" };\n  }\n};\n\nexport {\n  getEnchantments,\n  getItemData,\n  checkEnchantmentIsCompatible,\n  combineItems,\n};\n","import React from \"react\";\nimport {\n  Container,\n  Row,\n  Col,\n  Table,\n  Button,\n  InputGroup,\n  FormControl,\n} from \"react-bootstrap\";\nimport enchantments from \"../data/enchantments.json\";\nimport Select from \"react-select\";\nimport { checkEnchantmentIsCompatible } from \"../utils/item\";\n\nclass Item extends React.PureComponent {\n  addDisabledEnchantments(item) {\n    const existingEnchantments = item.enchantments.map((enchantment) => {\n      return { ...enchantment, enabled: true };\n    });\n    const possibleEnchantments = enchantments\n      .filter(\n        (filtered_enchantment) =>\n          //Possible enchantment is not in list of existing enchantments\n          !existingEnchantments.some(\n            (some_enchantment) =>\n              some_enchantment.name === filtered_enchantment.name\n          ) &&\n          //Possible enchantment is applicable to the given item\n          filtered_enchantment.applies_to.some(\n            (some_item) => some_item === item.name || item.name === \"book\"\n          )\n      )\n      .map((enchantment) => {\n        return { ...enchantment, level: enchantment.max_level, enabled: false };\n      });\n    return [...existingEnchantments, ...possibleEnchantments];\n  }\n\n  getPossibleEnchantmentOptions(item) {\n    return enchantments\n      .filter(\n        (filtered_enchantment) =>\n          !item.enchantments.some(\n            (some_enchantment) =>\n              some_enchantment.name === filtered_enchantment.name\n          ) && checkEnchantmentIsCompatible(item, filtered_enchantment)\n      )\n      .map((enchantment) => {\n        return { value: enchantment.name, label: enchantment.name };\n      });\n  }\n\n  render() {\n    const {\n      item,\n      changeEnchantmentToAdd,\n      onDelete,\n      onAddEnchantment,\n      onDeleteEnchantment,\n      onChangeLevel,\n      onChangePenalty,\n    } = this.props;\n\n    return (\n      <Container fluid>\n        <Row>\n          <Col xs=\"4\">\n            <h2>{item.name}</h2>\n          </Col>\n          <Col>\n            <Table>\n              <thead>\n                <tr>\n                  <th>Enchantment</th>\n                  <th>Level</th>\n                  <th>Item Multiplier</th>\n                  <th>Book Multiplier</th>\n                </tr>\n              </thead>\n              <tbody>\n                {item.enchantments.map((enchantment, index) => (\n                  <tr key={index}>\n                    <td>{enchantment.name}</td>\n                    <td>\n                      <input\n                        type=\"number\"\n                        value={enchantment.level}\n                        min=\"1\"\n                        max={enchantment.max_level}\n                        onChange={(e) => onChangeLevel(e, enchantment)}\n                      />\n                    </td>\n                    <td>{enchantment.item_multiplier}</td>\n                    <td>{enchantment.book_multiplier}</td>\n                    <td>\n                      <Button\n                        variant=\"outline-primary\"\n                        onClick={() => onDeleteEnchantment(enchantment)}\n                      >\n                        Delete\n                      </Button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </Table>\n          </Col>\n        </Row>\n        <Row>\n          <Col xs=\"3\">\n            <Select\n              options={this.getPossibleEnchantmentOptions(item)}\n              onChange={(e) => changeEnchantmentToAdd(e)}\n              placeholder=\"Enchantments...\"\n            />\n          </Col>\n          <Col xs=\"4\">\n            <Button variant=\"outline-primary\" onClick={onAddEnchantment}>\n              Add Enchantment\n            </Button>\n            <Button variant=\"outline-primary\" onClick={onDelete}>\n              Delete Item\n            </Button>\n          </Col>\n          <Col xs=\"3\">\n            <InputGroup className=\"mb-3\">\n              <InputGroup.Prepend>\n                <InputGroup.Text>Penalty</InputGroup.Text>\n              </InputGroup.Prepend>\n              <FormControl\n                type=\"number\"\n                value={item.penalty || 0}\n                min=\"0\"\n                onChange={(e) => onChangePenalty(e, item.index)}\n              />\n            </InputGroup>\n          </Col>\n        </Row>\n      </Container>\n    );\n  }\n}\n\nexport default Item;\n","import React from \"react\";\nimport { Container, Row, Badge } from \"react-bootstrap\";\nimport { numToNumeral, levelToExperience } from \"../utils/helpers\";\n\nclass Step extends React.PureComponent {\n  render() {\n    const { step } = this.props;\n    return (\n      <tr>\n        <td>\n          <Container>\n            <Row>\n              {step.targetItem.name}\n              <Badge pill variant=\"warning\">\n                {step.targetItem.penalty}\n              </Badge>\n            </Row>\n            <Row>\n              {step.targetItem.enchantments.map((enchantment, index) => {\n                return (\n                  <Badge\n                    key={index}\n                    pill\n                    variant={enchantment.is_curse ? \"danger\" : \"primary\"}\n                  >\n                    {enchantment.name} {numToNumeral(enchantment.level)}\n                  </Badge>\n                );\n              })}\n            </Row>\n          </Container>\n        </td>\n        <td>\n          <Container>\n            <Row>\n              {step.sacrificeItem.name}\n              <Badge pill variant=\"warning\">\n                {step.sacrificeItem.penalty}\n              </Badge>\n            </Row>\n            <Row>\n              {step.sacrificeItem.enchantments.map((enchantment, index) => {\n                return (\n                  <Badge\n                    key={index}\n                    pill\n                    variant={enchantment.is_curse ? \"danger\" : \"primary\"}\n                  >\n                    {enchantment.name} {numToNumeral(enchantment.level)}\n                  </Badge>\n                );\n              })}\n            </Row>\n          </Container>\n        </td>\n        <td>\n          <Container>\n            <Row>\n              {step.resultingItem.name}\n              <Badge pill variant=\"warning\">\n                {step.resultingItem.penalty}\n              </Badge>\n            </Row>\n            <Row>\n              {step.resultingItem.enchantments.map((enchantment, index) => {\n                return (\n                  <Badge\n                    key={index}\n                    pill\n                    variant={enchantment.is_curse ? \"danger\" : \"primary\"}\n                  >\n                    {enchantment.name} {numToNumeral(enchantment.level)}\n                  </Badge>\n                );\n              })}\n            </Row>\n          </Container>\n        </td>\n        <td>{step.stepCost}</td>\n        <td>{levelToExperience(step.stepCost)}</td>\n      </tr>\n    );\n  }\n}\n\nexport default Step;\n","import React from \"react\";\nimport \"./App.scss\";\n\nimport boots_sample from \"./data/boots_sample.json\";\nimport items from \"./data/items.json\";\nimport enchantments from \"./data/enchantments.json\";\nimport Item from \"./components/item\";\nimport Step from \"./components/step\";\nimport { getItemData } from \"./utils/item\";\nimport worker from \"workerize-loader!./utils/worker.js\"; // eslint-disable-line import/no-webpack-loader-syntax\nimport { Container, Row, Col, Table, Button } from \"react-bootstrap\";\nimport { levelToExperience, addIndexes } from \"./utils/helpers\";\nimport Select from \"react-select\";\n\nlet instance = worker();\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    const items_to_combine = addIndexes(boots_sample);\n    this.state = {\n      items_to_combine: items_to_combine,\n      results: { targetItem: {}, steps: [], status: \"Loading...\" },\n      nextIndex: items_to_combine.length,\n    };\n  }\n\n  getAddOptions() {\n    // e.g., if boots is in items_to_combine, the type is boots\n    const to_combine_item_type = this.state.items_to_combine.reduce(\n      (type, item) => {\n        return type || item.name === \"book\" ? type : item.name;\n      },\n      null\n    );\n    // Include if there is no type, the type matches, or if it's a book\n    const filtered_items = items.filter((item) => {\n      return (\n        !to_combine_item_type ||\n        item === to_combine_item_type ||\n        item === \"book\"\n      );\n    });\n    return filtered_items.map((item) => {\n      return { value: item, label: item };\n    });\n  }\n\n  componentDidMount() {\n    this.combineAndSetState(this.state.items_to_combine);\n    //this.setState({ results: mock });\n    //Use the following line to debug (no worker)\n    // this.setState({ results: combineItems(this.state.items_to_combine) });\n  }\n\n  combineAndSetState(items_to_combine) {\n    this.setState({\n      results: { targetItem: {}, steps: [], status: \"Loading...\" },\n    });\n    instance.terminate();\n    instance = worker();\n    instance.combineItemsExecute(items_to_combine).then((results) => {\n      this.setState({ results: results });\n    });\n  }\n\n  changeItemToAdd(e) {\n    this.setState({\n      itemToAdd: e.value,\n    });\n  }\n\n  addItem() {\n    if (this.state.itemToAdd) {\n      const new_items_to_combine = [\n        ...this.state.items_to_combine,\n        {\n          name: this.state.itemToAdd,\n          enchantments: [],\n          index: this.state.nextIndex,\n        },\n      ];\n      this.setState({\n        items_to_combine: new_items_to_combine,\n        nextIndex: this.state.nextIndex + 1,\n      });\n      this.combineAndSetState(new_items_to_combine);\n    }\n  }\n\n  deleteItem(index) {\n    const new_items_to_combine = this.state.items_to_combine.filter(\n      (item) => item.index !== index\n    );\n    this.setState({\n      items_to_combine: new_items_to_combine,\n    });\n    this.combineAndSetState(new_items_to_combine);\n  }\n\n  changeItemPenalty(e, item_index) {\n    if (!e.target) {\n      return;\n    }\n    let new_items_to_combine = [...this.state.items_to_combine];\n    const modifiedItem = new_items_to_combine.find(\n      (item) => item.index === item_index\n    );\n    modifiedItem.penalty = e.target.valueAsNumber;\n    new_items_to_combine = [\n      ...new_items_to_combine.filter((item) => item.index !== item_index),\n      modifiedItem,\n    ];\n    new_items_to_combine.sort((item_a, item_b) => item_a.index - item_b.index);\n    this.setState({\n      items_to_combine: new_items_to_combine,\n    });\n    this.combineAndSetState(new_items_to_combine);\n  }\n\n  changeEchantmentToAdd(e, item_index) {\n    const new_items_to_combine = [...this.state.items_to_combine];\n    new_items_to_combine.find(\n      (item) => item.index === item_index\n    ).enchantmentToAdd = e.value;\n    this.setState({\n      items_to_combine: new_items_to_combine,\n    });\n  }\n\n  getEnchantmentMaxLevel(enchantmentName) {\n    return enchantments.find(\n      (enchantment) => enchantment.name === enchantmentName\n    ).max_level;\n  }\n\n  addEnchantment(item_index) {\n    const new_items_to_combine = [...this.state.items_to_combine];\n    const new_item = new_items_to_combine.find(\n      (item) => item.index === item_index\n    );\n    if (new_item.enchantmentToAdd) {\n      new_item.enchantments = [\n        ...new_item.enchantments,\n        {\n          name: new_item.enchantmentToAdd,\n          level: this.getEnchantmentMaxLevel(new_item.enchantmentToAdd),\n        },\n      ];\n      this.setState({\n        items_to_combine: new_items_to_combine,\n      });\n      this.combineAndSetState(new_items_to_combine);\n    }\n  }\n\n  deleteEnchantment(item_index, enchantment) {\n    const new_items_to_combine = [...this.state.items_to_combine];\n    const new_item = new_items_to_combine.find(\n      (item) => item.index === item_index\n    );\n    new_item.enchantments = new_item.enchantments.filter(\n      (filter_enchantment) => filter_enchantment.name !== enchantment.name\n    );\n    this.setState({\n      items_to_combine: new_items_to_combine,\n    });\n    this.combineAndSetState(new_items_to_combine);\n  }\n\n  changeEnchantmentLevel(e, item_index, enchantment) {\n    if (!e.target) {\n      return;\n    }\n    const new_items_to_combine = [...this.state.items_to_combine];\n    const new_item = new_items_to_combine.find(\n      (item) => item.index === item_index\n    );\n    const new_enchantment = new_item.enchantments.find(\n      (find_enchantment) => find_enchantment.name === enchantment.name\n    );\n    new_enchantment.level = e.target.valueAsNumber;\n    this.setState({\n      items_to_combine: new_items_to_combine,\n    });\n    this.combineAndSetState(new_items_to_combine);\n  }\n\n  render() {\n    const { results, items_to_combine } = this.state;\n    return (\n      <div className=\"App\">\n        <Container fluid>\n          <Row>\n            <Col xs=\"2\">\n              <Select\n                options={this.getAddOptions()}\n                onChange={(e) => this.changeItemToAdd(e)}\n                placeholder=\"Items...\"\n              />\n            </Col>\n            <Col xs=\"1\">\n              <Button variant=\"outline-primary\" onClick={() => this.addItem()}>\n                Add\n              </Button>\n            </Col>\n            <Col xs=\"2\">\n              <Select\n                options={[]}\n                onChange={(e) => null}\n                placeholder=\"Presets...\"\n              />\n            </Col>\n            <Col xs=\"1\">\n              <Button variant=\"outline-primary\" onClick={() => this.addItem()}>\n                Select Preset\n              </Button>\n            </Col>\n            <Col xs=\"6\"></Col>\n          </Row>\n          <Row>\n            <Col>\n              {items_to_combine.map((item) => {\n                return (\n                  <Item\n                    item={getItemData(item)}\n                    key={item.index}\n                    onDelete={() => this.deleteItem(item.index)}\n                    onAddEnchantment={() => this.addEnchantment(item.index)}\n                    onDeleteEnchantment={(enchantment) =>\n                      this.deleteEnchantment(item.index, enchantment)\n                    }\n                    changeEnchantmentToAdd={(e) =>\n                      this.changeEchantmentToAdd(e, item.index)\n                    }\n                    onChangeLevel={(e, enchantment) =>\n                      this.changeEnchantmentLevel(e, item.index, enchantment)\n                    }\n                    onChangePenalty={(e) =>\n                      this.changeItemPenalty(e, item.index)\n                    }\n                  ></Item>\n                );\n              })}\n            </Col>\n            <Col>\n              <h3>Results</h3>\n              <p>{results.status}</p>\n              <p>Total Levels: {results.cost}</p>\n              <p>\n                Total Experience:{\" \"}\n                {results.steps.reduce(\n                  (total, step) => total + levelToExperience(step.stepCost),\n                  0\n                )}\n              </p>\n              <Table>\n                <thead>\n                  <tr>\n                    <th>Target</th>\n                    <th>Sacrifice</th>\n                    <th>Result</th>\n                    <th>Step Cost</th>\n                    <th>Step Experience</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {results.steps.map((step, index) => {\n                    return <Step step={step} key={index} />;\n                  })}\n                </tbody>\n              </Table>\n              {/* <p>{`Result JSON: ${JSON.stringify(results)}`}</p> */}\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport './App.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}